const translations = {
    en: {
        nav: {
            features: "Features",
            download: "Download",
            contact: "Contact",
            privacy: "Privacy"
        },
        hero: {
            subtitle: "AR for the adventurous soul",
            description: "Unlock the secrets of the sky with augmented reality. Discover landmarks, track celestial bodies, and explore the world around you.",
            downloadNow: "Download Now",
            learnMore: "Learn More"
        },
        benefits: {
            title: "How SkySeekr Enhances Your Experience",
            outdoorTitle: "For Outdoor Enthusiasts & Hikers",
            outdoorList: [
                "Never get lost at viewpoints",
                "Discover hidden landmarks",
                "Plan routes effectively",
                "Share discoveries with fellow hikers"
            ],
            astronomyTitle: "For Astronomy Enthusiasts & Students",
            astronomyList: [
                "Interactive astronomy learning",
                "Real-world geography lessons",
                "Engaging educational tool",
                "No need for expensive equipment"
            ],
            travelersTitle: "For Travelers & Tourists",
            travelersList: [
                "Instant landmark identification",
                "Create memorable experiences",
                "Smart trip planning",
                "Discover local points of interest"
            ],
            description: "SkySeekr transforms your smartphone into a powerful tool for exploration and discovery. Whether you're hiking through mountains, studying the night sky, or exploring a new city, our AR technology makes every experience more informative and engaging.",
            startExploring: "Start Exploring Now"
        },
        features: {
            title: "Key Features",
            landmarkSpotter: {
                title: "Landmark Spotter",
                description: "Identify mountains and landmarks in real-time using advanced AR technology"
            },
            planetSpotter: {
                title: "Planet Spotter",
                description: "Find and observe planets, the Sun, and the Moon in real-time"
            },
            customPackages: {
                title: "Custom Packages",
                description: "Create and manage your own sets of landmarks for personalized exploration"
            }
        },
        contact: {
            title: "Contact Us",
            description: "Have questions or feedback? We'd love to hear from you!",
            emailUs: "Email Us",
            followUs: "Follow Us"
        },

        privacy: {
            title: "Privacy Policy",
            subtitle: "Your Privacy Matters",
            intro: "At SkySeekr, we take your privacy seriously. Here's what you need to know about how we handle your data:",
            dataCollection: {
                title: "Data Collection",
                description: "We collect minimal data necessary for app functionality, including:",
                items: [
                    "Location data (only when using the app)",
                    "Device orientation data",
                    "Camera access (only when using AR features)"
                ]
            },
            dataUsage: {
                title: "Data Usage",
                description: "Your data is used solely for providing AR features and improving app functionality. We never sell your personal information to third parties."
            },
            dataProtection: {
                title: "Data Protection",
                description: "We implement industry-standard security measures to protect your data."
            },
            rights: {
                title: "Your Rights",
                description: "You have the right to:",
                items: [
                    "Access your data",
                    "Request data deletion",
                    "Opt out of data collection"
                ]
            }
        },
        footer: {
            copyright: "© 2024 SkySeekr. All rights reserved."
        }
    },
    ja: {
        nav: {
            features: "機能",
            download: "ダウンロード",
            contact: "お問い合わせ",
            privacy: "プライバシー"
        },
        hero: {
            subtitle: "冒険する魂のためのAR",
            description: "拡張現実で空の秘密を解き明かしましょう。ランドマークを発見し、天体を追跡し、周りの世界を探検しましょう。",
            downloadNow: "今すぐダウンロード",
            learnMore: "詳細を見る"
        },
        benefits: {
            title: "SkySeekrがもたらす体験の向上",
            outdoorTitle: "アウトドア愛好家とハイカーの方々へ",
            outdoorList: [
                "展望ポイントで迷わない",
                "隠れたランドマークを発見",
                "効果的なルート計画",
                "発見を仲間と共有"
            ],
            astronomyTitle: "天文学愛好家と学生の方々へ",
            astronomyList: [
                "インタラクティブな天文学習",
                "実世界の地理学習",
                "魅力的な教育ツール",
                "高価な機器不要"
            ],
            travelersTitle: "旅行者と観光客の方々へ",
            travelersList: [
                "即座のランドマーク識別",
                "思い出に残る体験を作成",
                "スマートな旅行計画",
                "地域の見どころを発見"
            ],
            description: "SkySeekrはあなたのスマートフォンを探検と発見のための強力なツールに変えます。山歩き、夜空の観察、新しい街の探検など、私たちのAR技術があらゆる体験をより有意義で魅力的なものにします。",
            startExploring: "今すぐ探検を始める"
        },
        features: {
            title: "主な機能",
            landmarkSpotter: {
                title: "ランドマークスポッター",
                description: "高度なAR技術を使用してリアルタイムで山やランドマークを識別"
            },
            planetSpotter: {
                title: "プラネットスポッター",
                description: "リアルタイムで惑星、太陽、月を見つけて観察"
            },
            customPackages: {
                title: "カスタムパッケージ",
                description: "パーソナライズされた探検のために独自のランドマークセットを作成・管理"
            }
        },
        contact: {
            title: "お問い合わせ",
            description: "ご質問やフィードバックをお待ちしております！",
            emailUs: "メールを送る",
            followUs: "フォローする"
        },

        privacy: {
            title: "プライバシーポリシー",
            subtitle: "あなたのプライバシーを大切に",
            intro: "SkySeekrでは、お客様のプライバシーを重視しています。データの取り扱いについて、以下の点をご確認ください：",
            dataCollection: {
                title: "データ収集",
                description: "アプリの機能に必要な最小限のデータのみを収集しています：",
                items: [
                    "位置データ（アプリ使用時のみ）",
                    "デバイスの向きデータ",
                    "カメラアクセス（AR機能使用時のみ）"
                ]
            },
            dataUsage: {
                title: "データの使用",
                description: "お客様のデータはAR機能の提供とアプリの機能改善にのみ使用されます。個人情報を第三者に販売することは一切ありません。"
            },
            dataProtection: {
                title: "データ保護",
                description: "業界標準のセキュリティ対策を実施してお客様のデータを保護しています。"
            },
            rights: {
                title: "お客様の権利",
                description: "お客様には以下の権利があります：",
                items: [
                    "データへのアクセス",
                    "データの削除リクエスト",
                    "データ収集のオプトアウト"
                ]
            }
        },

        footer: {
            copyright: "© 2024 SkySeekr. All rights reserved."
        }
    }
};


// Improved language toggle function
function toggleLanguage() {
    const currentLang = document.documentElement.lang || 'en';
    const newLang = currentLang === 'en' ? 'ja' : 'en';
    
    // Update content with new language
    updateContent(newLang);
    
    // Update toggle button text (opposite of current language)
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.textContent = newLang === 'en' ? '日本語' : 'English';
    }
    
    // Save language preference to localStorage
    localStorage.setItem('preferredLanguage', newLang);
}

// Improved content update function
function updateContent(lang) {
    if (!translations[lang]) {
        console.error(`Language ${lang} not found in translations`);
        return;
    }

    const content = translations[lang];
    
    // Update document language
    document.documentElement.lang = lang;
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (!key) return;

        try {
            // Split the key into parts (e.g., "nav.features" -> ["nav", "features"])
            const keys = key.split('.');
            let value = content;
            
            // Navigate through the nested objects to get the translation
            for (const k of keys) {
                value = value[k];
                if (value === undefined) throw new Error(`Translation not found for key: ${key}`);
            }
            
            // Update element content based on its type
            if (element.tagName === 'INPUT') {
                element.placeholder = value;
            } else {
                element.textContent = value;
            }
        } catch (error) {
            console.error(`Error updating translation for key ${key}:`, error);
        }
    });
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    // Check for saved language preference
    const savedLang = localStorage.getItem('preferredLanguage') || 'en';
    
    // Initialize content with saved language
    updateContent(savedLang);
    
    // Update toggle button to show opposite language
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.textContent = savedLang === 'en' ? '日本語' : 'English';
    }
    
    // Add click event listener to language toggle button
    const langToggleBtn = document.getElementById('langToggle');
    if (langToggleBtn) {
        langToggleBtn.addEventListener('click', toggleLanguage);
    }
});